<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lamax üí¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="/static/voice-chat.css">
    <style>
        /* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –¥–∞—Ç */
        .time-marker {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            color: var(--text-muted);
            font-size: 0.9rem;
            opacity: 0;
            animation: slideUp 0.5s ease forwards;
        }

        .time-marker-line {
            flex: 1;
            height: 1px;
            background: var(--border);
            margin: 0 10px;
        }

        .history-loader {
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
        }

        .load-more-btn {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            margin: 20px auto;
            display: block;
        }

        .load-more-btn:hover {
            background: var(--border);
            color: var(--text-primary);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 1000;
            animation: slideInRight 0.3s ease, slideInRight 0.3s ease 3s reverse forwards;
        }
    </style>
</head>
<body>
<!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
<div class="loading-screen" id="loadingScreen">
    <div class="loading-logo">üí¨</div>
    <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞</div>
    <div class="loading-bar">
        <div class="loading-progress"></div>
    </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
<div class="app-container" id="appContainer">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="server-icon active">
            <i class="fas fa-home"></i>
        </div>
        <div class="server-icon">
            <i class="fas fa-hashtag"></i>
        </div>
        <div class="server-icon">
            <i class="fas fa-gamepad"></i>
        </div>
        <div class="server-icon">
            <i class="fas fa-music"></i>
        </div>
        <div class="server-icon">
            <i class="fas fa-plus"></i>
        </div>

        <div class="user-menu">
            <div class="user-avatar-small" id="userMenuBtn">
                <img id="userAvatar" src="" alt="User">
            </div>
            <div class="user-dropdown" id="userDropdown">
                <div class="user-dropdown-item" id="profileBtn">
                    <i class="fas fa-user"></i>
                    <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                </div>
                <div class="user-dropdown-item" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                    <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </div>
                <div class="user-dropdown-item" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>–í—ã–π—Ç–∏</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Channels -->
    <div class="channels">
        <div class="server-header">
            <h2 class="server-name">Lamax Messenger</h2>
        </div>

        <div class="channel-list">
            <div class="channel-category">
                <div class="category-title">
                    <span>–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã</span>
                    <button class="add-channel-btn" title="–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="channel active" data-channel="general">
                    <i class="fas fa-hashtag"></i>
                    <span>–æ—Å–Ω–æ–≤–Ω–æ–π</span>
                </div>
                <div class="channel" data-channel="gaming">
                    <i class="fas fa-hashtag"></i>
                    <span>–∏–≥—Ä—ã</span>
                </div>
                <div class="channel" data-channel="music">
                    <i class="fas fa-hashtag"></i>
                    <span>–º—É–∑—ã–∫–∞</span>
                </div>
                <div class="channel" data-channel="help">
                    <i class="fas fa-hashtag"></i>
                    <span>–ø–æ–º–æ—â—å</span>
                </div>
            </div>

            <div class="channel-category">
                <div class="category-title">
                    <span>–ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã</span>
                    <button class="add-channel-btn" title="–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="channel" data-channel="voice">
                    <i class="fas fa-volume-up"></i>
                    <span>–≥–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Area -->
    <div class="chat-area">
        <!-- Chat Header -->
        <div class="chat-header">
            <div class="chat-info">
                <i class="fas fa-hashtag"></i>
                <h2 class="chat-title">–æ—Å–Ω–æ–≤–Ω–æ–π</h2>
            </div>
            <div class="chat-actions">
                <button class="action-btn" title="–¢–µ—Å—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞" id="testMicBtn">
                    <i class="fas fa-microphone"></i>
                </button>
                <button class="action-btn" title="–ü–æ–∏—Å–∫">
                    <i class="fas fa-search"></i>
                </button>
                <button class="action-btn" title="–£—á–∞—Å—Ç–Ω–∏–∫–∏">
                    <i class="fas fa-user-friends"></i>
                </button>
                <button class="action-btn" id="voiceCallBtn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫">
                    <i class="fas fa-phone"></i>
                </button>
                <button class="action-btn" id="videoCallBtn" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫">
                    <i class="fas fa-video"></i>
                </button>
                <button class="action-btn" id="voiceInfoBtn" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ–ª–æ—Å–æ–≤–æ–º —á–∞—Ç–µ">
                    <i class="fas fa-info-circle"></i>
                </button>
            </div>
        </div>

        <!-- Messages -->
        <div class="messages" id="messagesContainer">
            <div class="welcome-message">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Lamax Messenger! üí¨</h2>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...</p>
            </div>
        </div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-container">
                <textarea
                        class="message-input"
                        id="messageInput"
                        placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                        rows="1"
                ></textarea>
                <button class="send-btn" id="sendBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Users -->
    <div class="users">
        <div class="users-header">
            <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏ ‚Äî <span id="usersCount">1</span></h3>
        </div>
        <div class="users-list" id="usersList">
            <div class="user">
                <div class="user-avatar">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=system" alt="System">
                    <div class="status"></div>
                </div>
                <div class="user-info">
                    <div class="user-name">–°–∏—Å—Ç–µ–º–∞</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
<script src="/socket.io/socket.io.js"></script>
<script src="/static/voice-chat.js"></script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ -->
<script src="/static/app.js"></script>
</body>
</html>