<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Messenger</title>
    <link rel="stylesheet" href="Style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="dark">
<div class="app-container">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="hex-nav">
        <div class="hex-button active" data-tab="chat"><i class="fas fa-comment-alt"></i></div>
        <div class="hex-button" data-tab="users"><i class="fas fa-users"></i></div>
        <div class="hex-button" data-tab="notifications"><i class="fas fa-bell"></i></div>
        <div class="hex-button" data-tab="favorites"><i class="fas fa-star"></i></div>
        <div class="hex-button" data-tab="new-chat"><i class="fas fa-plus"></i></div>
        <div class="hex-button" data-tab="settings"><i class="fas fa-cog"></i></div>
    </div>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="circle-header">
        <div class="channel-info">
            <div class="channel-icon" id="chat-avatar"><i class="fas fa-hashtag"></i></div>
            <div>
                <h2 id="current-chat-name">–û–±—â–∏–π —á–∞—Ç</h2>
                <p id="current-chat-desc">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Nexus Messenger</p>
            </div>
        </div>
        <button class="input-btn" id="call-button" title="–ó–≤–æ–Ω–æ–∫" style="margin-left:auto;">
            <i class="fas fa-phone"></i>
        </button>
        <button class="input-btn" id="video-call-button" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫" style="margin-left:10px;">
            <i class="fas fa-video"></i>
        </button>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    <div class="messages-container" id="messages-container"></div>
    <div id="typing-indicator" style="padding:5px 15px;color:var(--accent);display:none;">–ü–µ—á–∞—Ç–∞–µ—Ç...</div>

    <!-- –ü–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ -->
    <div class="wave-input">
        <div class="input-wrapper">
            <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
            <div class="input-buttons">
                <button class="input-btn" id="send-button"><i class="fas fa-paper-plane"></i></button>
                <button class="input-btn" id="emoji-button"><i class="fas fa-smile"></i></button>
                <button class="input-btn" id="attach-button"><i class="fas fa-paperclip"></i></button>
                <button class="input-btn" id="mic-button"><i class="fas fa-microphone"></i></button>
                <input type="file" id="file-input" style="display:none" multiple>
            </div>
        </div>
        <div id="emoji-panel"></div>
        <div id="recording-indicator">üî¥ –ó–∞–ø–∏—Å—å...</div>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="diamond-sidebar">
        <div class="sidebar-content">
            <div class="tab-content" id="chat-tab">
                <div class="user-card">
                    <div class="user-avatar" id="me-avatar">–Ø</div>
                    <div class="user-name" id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div class="user-status">Online</div>
                </div>
                <div class="chat-list" id="chat-list">
                    <h3>–ß–∞—Ç—ã</h3>
                    <div class="chat-item active" data-room="room:public">üí¨ –û–±—â–∏–π —á–∞—Ç</div>
                </div>
            </div>

            <div class="tab-content" id="users-tab" style="display:none;">
                <h3>–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <input type="text" id="search-user" placeholder="–ü–æ–∏—Å–∫ –ø–æ @—Ç–µ–≥—É" style="width:100%;padding:8px;margin-bottom:10px;border-radius:8px;">
                <div class="user-list" id="user-list"></div>
            </div>

            <div class="tab-content" id="notifications-tab" style="display:none;">
                <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                <div class="notifications-list" id="notifications-list"><p>–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p></div>
            </div>

            <div class="tab-content" id="favorites-tab" style="display:none;">
                <h3>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
                <div class="favorites-list" id="favorites-list"><p>–ü–æ–∫–∞ –ø—É—Å—Ç–æ</p></div>
            </div>

            <div class="tab-content" id="new-chat-tab" style="display:none;">
                <h3>–ù–æ–≤—ã–π —á–∞—Ç</h3>
                <button class="user-action-btn" id="create-chat-btn">–°–æ–∑–¥–∞—Ç—å —á–∞—Ç</button>
            </div>
        </div>
    </div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label>–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</label>
                    <select id="theme-select">
                        <option value="dark">–¢—ë–º–Ω–∞—è</option>
                        <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                    </select>
                </div>
                <div class="setting-item">
                    <button class="user-action-btn" id="edit-profile-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                </div>
                <div class="setting-item">
                    <button class="user-action-btn" id="logout-btn">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <input type="text" id="new-username" placeholder="–ù–æ–≤–æ–µ –∏–º—è" style="width:100%;margin-bottom:10px;padding:8px;">
                <input type="text" id="new-nickname" placeholder="@–Ω–æ–≤—ã–π –Ω–∏–∫" style="width:100%;margin-bottom:10px;padding:8px;">
                <input type="password" id="profile-old-password" placeholder="–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å" style="width:100%;margin-bottom:10px;padding:8px;">
                <input type="password" id="profile-new-password" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω. 6)" style="width:100%;margin-bottom:10px;padding:8px;">
                <input type="file" id="profile-avatar" accept="image/*" style="margin-bottom:10px;">
                <button class="user-action-btn" id="save-profile">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>
        </div>
    </div>

    <!-- –û–∫–Ω–æ –∑–≤–æ–Ω–∫–∞ -->
    <div class="modal" id="call-window">
        <div class="modal-content" style="text-align:center;padding:30px;position:relative;">
            <video id="remote-video" autoplay playsinline
                   style="width:100%;height:250px;border-radius:10px;background:#000;object-fit:cover;"></video>
            <video id="local-video" autoplay playsinline muted
                   style="width:120px;height:90px;border-radius:10px;position:absolute;bottom:20px;right:20px;background:#000;border:2px solid var(--primary);"></video>
            <audio id="remote-audio" autoplay></audio>

            <h2 id="call-user-name" style="margin-top:20px;">–ó–≤–æ–Ω–æ–∫</h2>
            <p id="call-status-text">–û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞‚Ä¶</p>

            <div style="margin-top:30px;display:flex;justify-content:center;gap:20px;">
                <button class="user-action-btn" id="toggle-video-btn"><i class="fas fa-video"></i></button>
                <button class="user-action-btn" id="cancel-call-btn" style="background:#e74c3c;"><i class="fas fa-times"></i></button>
                <button class="user-action-btn" id="accept-call-window-btn"><i class="fas fa-phone"></i></button>
                <button class="user-action-btn" id="minimize-call-btn" style="background:#3498db;"><i class="fas fa-window-minimize"></i></button>
            </div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ -->
    <div id="in-call-ui">
        <span id="call-status">–ó–≤–æ–Ω–æ–∫‚Ä¶</span>
        <button class="user-action-btn" id="mute-btn">Mute</button>
        <button class="user-action-btn" id="expand-call-btn" style="background:#3498db;"><i class="fas fa-window-maximize"></i></button>
        <button class="user-action-btn" id="hangup-btn" style="background:#e74c3c;">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
    </div>

    <!-- üîî –†–∏–Ω–≥—Ç–æ–Ω -->
    <audio id="ringtone" src="/SoundCall.mp3" loop></audio>
</div>

<script src="JSScripts/chat.js"></script>
<script src="JSScripts/users.js"></script>
<script src="JSScripts/call.js"></script>
<script src="JSScripts/main.js"></script>

</body>
</html>
